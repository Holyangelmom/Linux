# 文件系统挂载与卸除

### 目录

1. 前言
2. 挂载 xfs/ext4/vfat 等文件系统
3. umount \(将装置文件卸除\)
4. 特殊装置 loop 挂载（常用于建立大文件以制作 loop 装置文件）

### 1、前言

挂载点是目录， 而这个目录是进入磁盘分区槽\(其实是文件系统啦！\)的入口就是了。不过要进行挂载前，你最好先确定几件事：

* 单一文件系统不应该被重复挂载在不同的挂载点\(目录\)中；
* 单一目录不应该重复挂载多个文件系统；
* 要作为挂载点的目录，理论上应该都是空目录才是

尤其是上述的后两点！如果你要用来挂载的目录里面并不是空的，那么挂载了文件系统之后，原目录下的东西就会暂时的消失。举个例子来说，假设你的 /home 原本与根目录 \(/\) 在同一个文件系统中，底下原本就有 /home/test 与 /home/vbird 两个目录。然后你想要加入新的磁盘，并且直接挂载 /home底下，那么当你挂载上新的分区槽时，则 /home 目录显示的是新分区槽内的资料，至于原先的 test 与vbird 这两个目录就会暂时的被隐藏掉了！注意喔！并不是被覆盖掉， 而是暂时的隐藏了起来，等到新分区槽被卸除之后，则 /home 原本的内容就会再次的跑出来啦！

下边是挂载指令mount usage：

### ![](/assets/mount usage.png)2、挂载 xfs/ext4/vfat 等文件系统

使用blkid找出刚刚格式化的分区，再使用mount挂载，前提是挂载点（目录）是事先创建好的空目录（最好是）。

![](/assets/挂载xfs文件系统.png)下面挂载刚刚格式化好的分区/dev/sda4

![](/assets/挂载sda4.png)

到这里装置已经可以使用了，但是还需要让系统开机时自动挂载，详情见见《Linux磁盘与文件系统》第八篇《8.设定开机挂载》

### 3、umount \(将装置文件卸除\)

![](/assets/umount usage.png)![](/assets/umount例子.png)

### 4、特殊装置 loop 挂载（常用于建立大文件以制作 loop 装置文件）

##### （1）、挂载DVD/光盘影像文件

（预留）

##### （2）、建立大文件以制作 loop 装置文件

如果当初在分区时， 你只有分区出一个根目录，假设你已经没有多余的容量可以进行额外的分区的！偏偏根目录的容量还很大！ 此时你就能够制作出一个大文件，然后将这个文件挂载！如此一来感觉上你就多了一个分区槽啰！下面进行试验。

使用dd指令建立大文件：_dd if=/dev/zero of=/srv/loopdev bs=1M count=512_

![](/assets/建立大文件.png)

格式化大文件，可以先df查看文件系统类型再决定用哪种格式化命令，这里直接用mkfs.ext4进行格式化并查看结果：

_sudo mkfs.ext4 /srv/loodev_

_blkid /srv/loopdev_

![](/assets/格式化大型文件.png)

![](/assets/查看格式化大文件结果.png)

挂载

_mount -o loop /srv/loopdev /mnt_

![](/assets/挂载loop装置.png)

编辑/etc/fstab设置开机自动挂载，这里的options列需要设置额外添加“loop”选项。

![](/assets/loop设备自动挂载.png)再卸载装置进行测试是否正确

_sudo umount /mnt_

_sudo mount -a_

![](/assets/测试开机挂载loop.png)

