# TCP握手

### 1.TCP三次握手

![](/assets/TCP三次握手图.png)

**握手细节描述：**

* 第一次握手：客户端：我请求连接（SYN=1），请你应答（ACK=0），当前数据包序列号为x（seq=x）
* 第二次握手：服务端：已收到你的请求（ACK=1），我也请求连接（SYN=1），当前数据包序列号为y（seq=y），下一个数据包序列号必须是你说的x再加上1（ack=x+1）
* 第三次握手：客户端：已收到你的请求（ACK=1），当前数据包序列号就是你说的x+1（seq=x+1），确认号就是你说的y再加上1（ack=y+1）

### 2.TCP四次握手

![](/assets/TCP四次握手.png)

* 第一次挥手：主机A向主机B发送FIN包；A告诉B，我（A）发送给你（B）的数据大小是N，我发送完毕，请求断开A-&gt;B的连接。
* 第二次挥手：主机B收到了A发送的FIN包，并向主机A发送ACK包；B回答A，是的，我总共收到了你发给我N大小的数据，A-&gt;B的连接关闭。
* 第三次挥手：主机B向主机A发送FIN包；B告诉A，我（B）发送给你（A）的数据大小是M，我发送完毕，请求断开B-&gt;A的连接。
* 第四次挥手：主机A收到了B发送的FIN包，并向主机B发送ACK包；A回答B，是的，我收到了你发送给我的M大小的数据，B-&gt;A的连接关闭。



